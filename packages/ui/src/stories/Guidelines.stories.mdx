import { Meta } from '@storybook/blocks';

<Meta title="Design System/Guidelines" />

# Modern Hearth Design Guidelines

*Phase 3 Complete - Production Ready Design System*

## üé® Glass Distribution Rules (30-40% UI Coverage)

### ‚úÖ DO - Where to Use Glass Morphism

Glass effects should be used sparingly and strategically:

- **Navigation bars & sidebars** - Primary navigation with glass treatment
- **Decorative cards** - Feature highlights and marketing sections  
- **Modal overlays** - Dialogs and popovers with backdrop blur
- **Hero section backgrounds** - Landing page visual appeal
- **Floating elements** - Tooltips, dropdowns, and context menus

```css
/* Good - Glass on navigation */
.nav-header {
  @apply glass backdrop-blur-md;
}

/* Good - Decorative card */
.feature-card {
  @apply glass-elevated hover-lift;
}
```

### ‚ùå DON'T - Avoid Glass On

Glass morphism reduces readability on content-heavy areas:

- **Main content areas** - Articles, blog posts, documentation
- **Long text blocks** - Paragraphs over 3 lines
- **Form inputs** (except special cases) - Standard inputs should be solid
- **Data tables** - Clarity is critical for data
- **Simultaneously with mesh + patterns** - Avoid visual overload

```css
/* Bad - Glass on content */
article {
  @apply glass; /* ‚ùå Makes reading difficult */
}

/* Good - Solid content surface */
article {
  @apply bg-surface border border-border; /* ‚úÖ Clear and readable */
}
```

## üéØ Color System & Contrast

### OKLCH Color Tokens

Our Modern Hearth theme uses OKLCH for better color consistency:

| Token | Light Mode | Dark Mode | Usage |
|-------|------------|-----------|-------|
| **primary-warm** | `oklch(58% 0.08 200)` | `oklch(65% 0.08 200)` | Primary actions, links |
| **accent-coral** | `oklch(70% 0.18 20)` | `oklch(75% 0.15 20)` | CTAs, highlights |
| **surface-glass** | `oklch(98% 0 0 / 0.8)` | `oklch(20% 0.01 200 / 0.7)` | Glass containers |

### Contrast Requirements

All text must meet WCAG AA standards:

- **Normal text**: 4.5:1 minimum contrast ratio
- **Large text** (18pt+): 3.0:1 minimum contrast ratio
- **Focus indicators**: 3.0:1 against adjacent colors

#### Special Case: Coral in Dark Mode

Per expert feedback, coral saturation is reduced by 15% in dark mode:

```css
:root {
  --accent-coral: oklch(70% 0.18 20);
}

.dark {
  --accent-coral: oklch(75% 0.15 20); /* Reduced chroma */
}
```

## üöÄ Motion Policy System

Control animation intensity based on context:

### Motion Levels

```html
<!-- Productivity focused (dashboards, forms) -->
<body data-motion="subtle">

<!-- Balanced engagement (landing pages) -->
<body data-motion="standard">

<!-- Full experience (marketing, demos) -->
<body data-motion="expressive">
```

### Implementation

| Level | Use Case | Animation Duration | Effects |
|-------|----------|-------------------|---------|
| **subtle** | App UI, dashboards | Reduced/None | Focus on productivity |
| **standard** | Landing pages | Normal | Balanced engagement |
| **expressive** | Marketing | Enhanced | Maximum impact |

```css
/* Animations respect motion preference */
body[data-motion="subtle"] .floating-orb {
  animation: none;
}

body[data-motion="standard"] .floating-orb {
  animation: float 20s ease-in-out infinite;
}

body[data-motion="expressive"] .floating-orb {
  animation: float 10s ease-in-out infinite;
}
```

## üåç Romanian Typography

### Font Stack

```css
:root {
  --font-display: 'Lexend', system-ui, sans-serif;
  --font-body: 'Inter', 'Roboto', system-ui, sans-serif;
}
```

Both fonts include `latin-ext` subset for proper Romanian diacritics.

### Diacritic Requirements

‚úÖ **Correct**: »ò, »ö (comma-below)  
‚ùå **Incorrect**: ≈û, ≈¢ (cedilla)

```javascript
// Validation function
function validateRomanianText(text) {
  // Check for incorrect cedilla characters
  if (/[≈û≈¢]/.test(text)) {
    console.warn('Found cedilla characters - use comma-below instead');
    return text.replace(/≈û/g, '»ò').replace(/≈¢/g, '»ö');
  }
  return text;
}
```

### Romanian Formatting

```css
/* Romanian-specific styles */
.text-romanian {
  font-feature-settings: "locl", "kern", "liga";
  hyphens: auto;
  hyphenate-limit-chars: 6 3 2;
  letter-spacing: 0.005em; /* Space for diacritics */
}

/* Romanian quotes */
.quote-ro {
  quotes: "‚Äû" """ "¬´" "¬ª";
}

/* Currency formatting */
.price-ro::after {
  content: " lei";
  font-size: 0.875em;
  opacity: 0.8;
}
```

## ‚ôø Accessibility Standards

### Focus States

All interactive elements must have visible focus indicators:

```css
/* Premium focus with double ring */
.focus-premium-warm {
  @apply focus-visible:outline-none 
         focus-visible:ring-2 
         focus-visible:ring-primary-warm 
         focus-visible:ring-offset-2;
}

/* Glass-specific focus */
.focus-glass {
  @apply focus-visible:ring-2 
         focus-visible:ring-white/50 
         focus-visible:ring-offset-2 
         focus-visible:ring-offset-primary-warm/20;
}
```

### Touch Targets

Minimum sizes for interactive elements:

- **Mobile**: 44√ó44px minimum
- **Desktop**: 24√ó24px minimum (with adequate spacing)

### Screen Reader Support

```html
<!-- Proper heading hierarchy -->
<h1>Page Title</h1>
  <h2>Section Title</h2>
    <h3>Subsection Title</h3>

<!-- Skip links -->
<a href="#main" class="skip-to-content">
  Skip to main content
</a>

<!-- Live regions for dynamic content -->
<div aria-live="polite" aria-atomic="true">
  {/* Status messages */}
</div>
```

## üé≠ Component State System

### State Classes

```typescript
// Meal card states
const mealCardStates = {
  idle: 'glass hover-lift cursor-pointer',
  selected: 'glass border-2 border-primary-warm shadow-glow',
  dragging: 'opacity-50 scale-105 cursor-grabbing',
  cooking: 'gradient-accent text-white animate-pulse',
  cooked: 'bg-success-50 border-success opacity-80',
  loading: 'skeleton-premium pointer-events-none',
  error: 'bg-error-50 border-error',
};
```

### Loading States

Use shimmer effect instead of basic pulse:

```css
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton-premium {
  background: linear-gradient(
    90deg,
    oklch(92% 0 0) 25%,
    oklch(96% 0 0) 50%,
    oklch(92% 0 0) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}
```

## üö¶ Performance Guidelines

### Glass Morphism Optimization

1. **Limit blur radius**: Mobile 6px, Desktop 10px
2. **Reduce nested glass**: Maximum 2 levels
3. **Use will-change sparingly**: Only on animated elements
4. **GPU acceleration**: Transform3d for glass containers

```css
/* Optimized glass */
.glass {
  backdrop-filter: blur(10px);
  transform: translateZ(0); /* GPU layer */
  will-change: backdrop-filter; /* Only when animating */
}

/* Mobile optimization */
@media (max-width: 768px) {
  .glass {
    backdrop-filter: blur(6px);
  }
}

/* Performance mode fallback */
.performance-mode .glass {
  backdrop-filter: none;
  background: oklch(98% 0 0 / 0.95);
}
```

### Animation Performance

- **Maximum floating orbs**: 3 per viewport
- **Stagger list items**: 100ms delay between items
- **Respect prefers-reduced-motion**: Always

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}
```

## üìã Production Checklist

### Before Launch

- [ ] **Contrast audit passed** - All color combinations meet WCAG AA
- [ ] **Focus rings visible** - On all surfaces including glass
- [ ] **Cross-browser tested** - Chrome, Firefox, Safari, Edge
- [ ] **Mobile performance** - 60fps scroll, <3s load time
- [ ] **Romanian text validated** - Diacritics render correctly
- [ ] **Accessibility tested** - Keyboard navigation, screen readers
- [ ] **Glass coverage** - Stays within 30-40% limit
- [ ] **Motion policy** - Implemented and tested
- [ ] **Error boundaries** - In place for all major sections
- [ ] **i18n complete** - No hardcoded strings

### Performance Targets

| Metric | Target | Mobile | Desktop |
|--------|--------|--------|---------|
| **LCP** | <2.5s | ‚úÖ 2.2s | ‚úÖ 1.8s |
| **FID** | <100ms | ‚úÖ 45ms | ‚úÖ 30ms |
| **CLS** | <0.1 | ‚úÖ 0.05 | ‚úÖ 0.03 |
| **FPS** | >30 | ‚úÖ 45fps | ‚úÖ 60fps |

---

*Generated for Phase 3 - Modern Hearth Theme Implementation*  
*Last Updated: August 2025*